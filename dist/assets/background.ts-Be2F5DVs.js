import{g as s}from"./getCatFact-DjrZPQam.js";async function i(e){try{const t=await chrome.windows.getCurrent();t.id&&(chrome.windows.update(t.id,{focused:!0,state:"maximized"}),await chrome.tabs.create({url:e,active:!0}))}catch(t){console.log("No current windows",t),await chrome.windows.create({url:e,focused:!0,type:"popup",height:700,width:700})}}function r(e){const t={title:"Cat Fact",message:e,type:"image",iconUrl:"https://cataas.com/cat?type=square",imageUrl:"https://cataas.com/cat?width=668&height=304",buttons:[{title:"Click"},{title:"Dismiss"}],priority:0,requireInteraction:!1};return chrome.notifications.create(t)}let o=!1;chrome.runtime.onStartup.addListener(function(){console.log("onStartup")});chrome.action.onClicked.addListener(function(){o=!o,chrome.action.setIcon({path:{19:"images/"+(o?"day":"night")+"-19.png",38:"images/"+(o?"day":"night")+"-38.png"}}),chrome.action.setTitle({title:o?"Disable":"Enable"}),o?d().then(()=>console.log("startHeartbeat()")):u().then(()=>console.log("stopHeartbeat()"))});let h;async function l(){var n,c;const e=Math.floor(Math.random()*4+1),t=chrome.runtime.getURL("index.html"),m=await((n=chrome.cookies)==null?void 0:n.get({name:"JSESSIONID",url:"https://qa-mv-1778/asset-manager-web"}));if(console.log("MV JSESSIONID cookie",m),e==1){const a=await s();await r(a)}else if(e==2)await i(t);else if(e==3){const a=await chrome.tabs.query({title:"MobileView"});console.log("Focus MV tab"),(c=a[0])!=null&&c.id?await chrome.tabs.update(a[0].id,{active:!0,highlighted:!0}):console.log("no MV tab detected")}else{const a=await s();await r(a)}await chrome.storage.local.set({"last-heartbeat":new Date().getTime()})}async function d(){l().then(()=>{h=setInterval(l,20*1e3)})}async function u(){clearInterval(h)}chrome.notifications.onClicked.addListener(()=>{i("https://cataas.com/cat?type=square")});chrome.notifications.onButtonClicked.addListener((e,t)=>{t==0&&i(chrome.runtime.getURL("index.html"))});
